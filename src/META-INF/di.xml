<?xml version="1.0" encoding="UTF-8"?>
<di xmlns="http://www.appserver.io/appserver">
    <preferences>
        <preference>
            <interface>TechDivision\Import\Utils\Generators\GeneratorInterface</interface>
            <class>TechDivision\Import\Utils\Generators\CoreConfigDataUidGenerator</class>
        </preference>
    </preferences>
    <beans>
        <bean>
            <name>LoggerFactory</name>
            <class>AppserverIo\Apps\Example\Logger\LoggerFactory</class>
            <bean-ref>
                <bean-ref-name>Configuration</bean-ref-name>
                <injection-target>
                    <injection-target-class>AppserverIo\Apps\Example\Logger\LoggerFactory</injection-target-class>
                    <injection-target-property>configuration</injection-target-property>
                </injection-target>
            </bean-ref>
            <res-ref>
                <res-ref-name>SystemLogger</res-ref-name>
                <lookup-name>php:global/log/System</lookup-name>
                <injection-target>
                    <injection-target-class>AppserverIo\Apps\Example\Logger\LoggerFactory</injection-target-class>
                    <injection-target-property>systemLogger</injection-target-property>
                </injection-target>
            </res-ref>
        </bean>
        <bean>
            <name>ConfigurationFactory</name>
            <class>AppserverIo\Apps\Example\Configuration\ConfigurationFactory</class>
            <res-ref>
                <res-ref-name>ApplicationInterface</res-ref-name>
                <injection-target>
                    <injection-target-class>AppserverIo\Apps\Example\Logger\LoggerFactory</injection-target-class>
                    <injection-target-property>application</injection-target-property>
                </injection-target>
            </res-ref>
        </bean>
        <bean>
            <name>LexerConfigFactory</name>
            <class>TechDivision\Import\Adapter\Csv\LexerConfigFactory</class>
            <bean-ref>
                <bean-ref-name>Configuration</bean-ref-name>
            </bean-ref>
        </bean>
        <bean>
            <name>PluginFactory</name>
            <class>AppserverIo\Apps\Example\Plugins\PluginFactory</class>
            <res-ref>
                <res-ref-name>ProviderInterface</res-ref-name>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Plugins\PluginFactory</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>container</injection-target-method-parameter-name>
                </injection-target>
            </res-ref>
        </bean>
        <bean>
            <name>SubjectFactory</name>
            <class>AppserverIo\Apps\Example\Subjects\SubjectFactory</class>
            <res-ref>
                <res-ref-name>ProviderInterface</res-ref-name>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Subjects\SubjectFactory</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>container</injection-target-method-parameter-name>
                </injection-target>
            </res-ref>
        </bean>
        <bean>
            <name>Configuration</name>
            <class>TechDivision\Import\ConfigurationInterface</class>
            <factory>
                <name>ConfigurationFactory</name>
                <method>createConfiguration</method>
            </factory>
        </bean>
        <bean>
            <name>SystemLoggers</name>
            <class>Doctrine\Common\Collections\Collection</class>
            <factory>
                <name>LoggerFactory</name>
                <method>factory</method>
            </factory>
        </bean>
        <bean>
            <name>LexerConfig</name>
            <class>Goodby\CSV\Import\Standard\LexerConfig</class>
            <factory>
                <name>LexerConfigFactory</name>
                <method>createLexerConfig</method>
            </factory>
        </bean>
        <bean>
            <name>CsvImportAdapter</name>
            <class>TechDivision\Import\Adapter\CsvImportAdapter</class>
            <bean-ref>
                <bean-ref-name>Lexer</bean-ref-name>
            </bean-ref>
            <bean-ref>
                <bean-ref-name>Interpreter</bean-ref-name>
            </bean-ref>
        </bean>
        <bean>
            <name>Lexer</name>
            <class>TechDivision\Import\Adapter\Goodby\Lexer</class>
            <bean-ref>
                <bean-ref-name>LexerConfig</bean-ref-name>
            </bean-ref>
        </bean>
        <bean>
            <name>Interpreter</name>
            <class>TechDivision\Import\Adapter\Goodby\Interpreter</class>
        </bean>
        <bean>
            <name>CallbackVisitor</name>
            <class>AppserverIo\Apps\Example\Callbacks\CallbackVisitor</class>
            <res-ref>
                <res-ref-name>ProviderInterface</res-ref-name>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Callbacks\CallbackVisitor</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>container</injection-target-method-parameter-name>
                </injection-target>
            </res-ref>
        </bean>
        <bean>
            <name>ObserverVisitor</name>
            <class>AppserverIo\Apps\Example\Observers\ObserverVisitor</class>
            <res-ref>
                <res-ref-name>ProviderInterface</res-ref-name>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Observers\ObserverVisitor</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>container</injection-target-method-parameter-name>
                </injection-target>
            </res-ref>
        </bean>
        <bean>
            <name>ArchivePlugin</name>
            <class>TechDivision\Import\Plugins\ArchivePlugin</class>
            <epb-ref>
                <epb-ref-name>ImportApplication</epb-ref-name>
                <epb-link>ImportApplication</epb-link>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>TechDivision\Import\Plugins\ArchivePlugin</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>application</injection-target-method-parameter-name>
                </injection-target>
            </epb-ref>
        </bean>
        <bean>
            <name>SubjectPlugin</name>
            <class>AppserverIo\Apps\Example\Plugins\SubjectPlugin</class>
            <epb-ref>
                <epb-ref-name>ImportApplication</epb-ref-name>
                <epb-link>ImportApplication</epb-link>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Plugins\SubjectPlugin</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>application</injection-target-method-parameter-name>
                </injection-target>
            </epb-ref>
            <res-ref>
                <res-ref-name>Import</res-ref-name>
                <res-ref-type>pms/import</res-ref-type>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Plugins\SubjectPlugin</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>importSender</injection-target-method-parameter-name>
                </injection-target>
            </res-ref>
        </bean>
        <bean>
            <name>MoveFilesSubject</name>
            <class>TechDivision\Import\Subjects\MoveFilesSubject</class>
            <epb-ref>
                <epb-ref-name>RegistryProcessor</epb-ref-name>
                <epb-link>RegistryProcessor</epb-link>
            </epb-ref>
            <bean-ref>
                <bean-ref-name>GeneratorInterface</bean-ref-name>
                <bean-ref-type>TechDivision\Import\Utils\Generators\GeneratorInterface</bean-ref-type>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>TechDivision\Import\Subjects\MoveFilesSubject</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>coreConfigDataUidGenerator</injection-target-method-parameter-name>
                </injection-target>
            </bean-ref>
            <bean-ref>
                <bean-ref-name>SystemLoggers</bean-ref-name>
            </bean-ref>
        </bean>
        <bean>
            <name>ProductSubject</name>
            <class>AppserverIo\Apps\Example\Subjects\ProductSubject</class>
            <epb-ref>
                <epb-ref-name>RegistryProcessor</epb-ref-name>
                <epb-link>RegistryProcessor</epb-link>
            </epb-ref>
            <bean-ref>
                <bean-ref-name>GeneratorInterface</bean-ref-name>
                <bean-ref-type>TechDivision\Import\Utils\Generators\GeneratorInterface</bean-ref-type>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Subjects\ProductSubject</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>coreConfigDataUidGenerator</injection-target-method-parameter-name>
                </injection-target>
            </bean-ref>
            <bean-ref>
                <bean-ref-name>SystemLoggers</bean-ref-name>
            </bean-ref>
        </bean>
        <bean>
            <name>ProductObserver</name>
            <class>AppserverIo\Apps\Example\Observers\ProductObserver</class>
            <epb-ref>
                <epb-ref-name>ImportProductProcessor</epb-ref-name>
                <epb-link>ImportProductProcessor</epb-link>
            </epb-ref>
        </bean>
        <bean>
            <name>SqlStatements</name>
            <class>AppserverIo\Apps\Example\Utils\SqlStatements</class>
        </bean>
        <bean>
            <name>ProductCreateProcessor</name>
            <class>AppserverIo\Apps\Example\Actions\Processors\ProductCreateProcessor</class>
            <persistence-unit-ref>
                <persistence-unit-ref-name>EntityManager</persistence-unit-ref-name>
                <persistence-unit-name>ExampleEntityManager</persistence-unit-name>
            </persistence-unit-ref>
            <bean-ref>
                <bean-ref-name>SqlStatements</bean-ref-name>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Repositories\ImportProductRepository</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>utilityClass</injection-target-method-parameter-name>
                </injection-target>
            </bean-ref>
        </bean>
        <bean>
            <name>ProductUpdateProcessor</name>
            <class>AppserverIo\Apps\Example\Actions\Processors\ProductUpdateProcessor</class>
            <persistence-unit-ref>
                <persistence-unit-ref-name>EntityManager</persistence-unit-ref-name>
                <persistence-unit-name>ExampleEntityManager</persistence-unit-name>
            </persistence-unit-ref>
            <bean-ref>
                <bean-ref-name>SqlStatements</bean-ref-name>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Repositories\ImportProductRepository</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>utilityClass</injection-target-method-parameter-name>
                </injection-target>
            </bean-ref>
        </bean>
        <bean>
            <name>ProductDeleteProcessor</name>
            <class>AppserverIo\Apps\Example\Actions\Processors\ProductDeleteProcessor</class>
            <persistence-unit-ref>
                <persistence-unit-ref-name>EntityManager</persistence-unit-ref-name>
                <persistence-unit-name>ExampleEntityManager</persistence-unit-name>
            </persistence-unit-ref>
            <bean-ref>
                <bean-ref-name>SqlStatements</bean-ref-name>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Repositories\ImportProductRepository</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>utilityClass</injection-target-method-parameter-name>
                </injection-target>
            </bean-ref>
        </bean>
        <bean>
            <name>ProductAction</name>
            <class>AppserverIo\Apps\Example\Actions\ProductAction</class>
            <bean-ref>
                <bean-ref-name>ProductCreateProcessor</bean-ref-name>
                <injection-target>
                    <injection-target-class>AppserverIo\Apps\Example\Actions\ProductAction</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>createProcessor</injection-target-method-parameter-name>
                </injection-target>
            </bean-ref>
            <bean-ref>
                <bean-ref-name>ProductUpdateProcessor</bean-ref-name>
                <injection-target>
                    <injection-target-class>AppserverIo\Apps\Example\Actions\ProductAction</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>updateProcessor</injection-target-method-parameter-name>
                </injection-target>
            </bean-ref>
            <bean-ref>
                <bean-ref-name>ProductDeleteProcessor</bean-ref-name>
                <injection-target>
                    <injection-target-class>AppserverIo\Apps\Example\Actions\ProductAction</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>deleteProcessor</injection-target-method-parameter-name>
                </injection-target>
            </bean-ref>
        </bean>
        <bean>
            <name>ImportProductRepository</name>
            <class>AppserverIo\Apps\Example\Repositories\ImportProductRepository</class>
            <persistence-unit-ref>
                <persistence-unit-ref-name>EntityManager</persistence-unit-ref-name>
                <persistence-unit-name>ExampleEntityManager</persistence-unit-name>
            </persistence-unit-ref>
            <bean-ref>
                <bean-ref-name>SqlStatements</bean-ref-name>
                <injection-target>
                    <description><![CDATA[This is necessary, because ref name doesn't equal the parameter name]]></description>
                    <injection-target-class>AppserverIo\Apps\Example\Repositories\ImportProductRepository</injection-target-class>
                    <injection-target-method>__construct</injection-target-method>
                    <injection-target-method-parameter-name>utilityClass</injection-target-method-parameter-name>
                </injection-target>
            </bean-ref>
        </bean>
    </beans>
</di>